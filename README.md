# Rapid Urbanism Explorer

The Rapid Urbanism Explorer is an Augmented Intelligence (AI) Platform to strengthen collaboration
amongst decision makers in developing new urban districts in advanced ways. Rapid iterative virtual
prototyping empowers stakeholders to produce complex urbanization scenarios integrating spatial,
temporal, socioeconomic and environmental parameters in real time. Further info on
[www.RapidUrbanism.com/Explorer-AI](www.RapidUrbanism.com/Explorer-AI).

## Rapid Urbanism Explorer Version 0.2

This is version 0.2 of RUE. This version is an early prototype. It is constrained to sites that are
defined as a quadrilateral. 

This software is offered under the 
[MIT License](https://github.com/rapidurbanism/RUE02/raw/main/LICENSE).

[**Please read the terms and conditions of this software.**](Terms_of_Use.pdf)

RUE has been tested on the Chrome browser.

![RUE 0.2](rue02.png)

## Overview

The RUE explorer consist of two parts: a spatial model and a financial model.
- The spatial model starts with a site and uses a set of parametric scripts to generate a spatial
  model of the proposed development. The spatial model includes both the 3D geometry and a set of
  other data associated with that model.
- The financial model start with the data generated by the spatial model and calculates various
  metrics relating to economic and social viability of the project.

On the left hand side, the user enters a set of spatial parameter values that drive the spatial
model. Clicking the `Apply` button then updates the the spatial model, which in turn updates the
financial model.

The software is completely client-side. It does not perform any computation on the server. This
allows the software to be used anywhere, even in locations where Internet connectivity is poor. 

## Spatial Model

For the spatial models, RUE uses Mobius Modeller, a client-side parametric modelling software in the
browser.

The spatial model consist of three scripts:
- _City_: Generates the site polygon.
- _Neighbourhood_: Subdivides the site into a set of roads and partitions.
- _Tissue_: Subdivides partitions into lots, and generates 3D building massing.

(In the user interface, there are also sections for `Buildings` and `Dwellings`. However, in this
early prototype, these were not implemented.)

## Financial Model

For the financial models, RUE uses [LuckySheet](https://github.com/mengshukeji/Luckysheet), a
client-side spreadsheet.

In RUE 0.2, financial model consist of s single spreadsheet. Values from the spatial model are
inserted into specific cells in the spreadsheet, which then triggers the spreadsheet calculations to
be executed. 

The financial model was developed as a Microsoft Excel spreadsheet, and then converted into the
LuckySheet format. The Excel file was manually converted, by loading the file into an [online
LuckySheet application](https://mengshukeji.github.io/LuckyexcelDemo/). The data was then extracted
and incorporated into the RUE application. 

## Saving and Loading Plans

The settings for a specific spatial model can be saved as a RUE file (with a _.rue_ extension). 

The save functionality is available under the three-bar menu button available in the top-left hand
corner. The `Save Plan` option allows you to save the plan, and the `Load Plan` option allows you to
re-load a previously saved plan.

## Framework

RUE is developed using the React framework, version 16. 

In this version, Mobius Modeller is embedded within RUE in an _iframe_ html component. The Mobius
files (a _.mob_ file) is then loaded into Mobius and executed. This generates both the 3D model and
the associated data. In later versions of RUE, a slightly different approach was taken to improve
performance and security.

The three Mobius scripts (_.mob_ files) are saved in a publicly accessible repository. When RUE
executes, it will trigger Mobius to execute, passing in the URL of each Mobius script. Mobius will
then retrieve the script and execute it.

For this version of RUE, Mobius Modeller version 0.5 was used. 
* [Mobius Modeller 0.5](https://design-automation.github.io/mobius-parametric-modeller-0-5-77/)

When this version of RUE was develop, the LuckySheet library was not yet available on the NPM
package manager. The source code for LuckySheet was therefore included, under the
`/public/luckysheet/` folder.

## Installation and Build

To install, change to root folder, then:
`npm install`

To init credentials:
`amplify init`

To start dev server:
`npm start`

## Direct Dependencies

The two main dependencies are:
- Mobius Modeller: https://github.com/design-automation/mobius-parametric-modeller-0-5-77
- LuckySheet: https://github.com/mengshukeji/Luckysheet

A list of direct dependencies were extracted using 
[NPM license crawler](https://www.npmjs.com/package/npm-license-crawler), as follows:
- `npm-license-crawler- --onlyDirectDependencies --csv libs.csv`

See [the output CSV file](libs.csv).

The website links for the dependencies are as follows:
- https://github.com/ant-design/ant-design-charts
- https://github.com/ant-design/ant-design-icons/tree/master/packages/icons-react
- https://github.com/antvis/data-set
- https://github.com/aws-amplify/amplify-js
- https://github.com/gsoft-inc/craco
- https://github.com/Doodle3D/clipper-js
- https://github.com/formulajs/formulajs
- https://github.com/gregberge/loadable-components
- https://github.com/testing-library/jest-dom
- https://github.com/testing-library/react-testing-library
- https://github.com/testing-library/user-event
- https://github.com/DefinitelyTyped/DefinitelyTyped
- https://github.com/ant-design/ant-design
- https://github.com/aws-amplify/amplify-js
- https://github.com/ant-design/babel-plugin-import
- https://github.com/alibaba/BizCharts
- https://github.com/gka/chroma.js
- https://github.com/omichelsen/compare-versions
- https://github.com/FormAPI/craco-less
- https://github.com/cytoscape/cytoscape.js
- https://github.com/d3/d3-delaunay
- https://github.com/d3/d3-polygon
- https://github.com/d3/d3-voronoi
- https://github.com/eligrey/FileSaver.js
- https://github.com/Stuk/jszip
- https://github.com/webpack-contrib/less-loader
- https://github.com/less/less.js
- https://github.com/josdejong/mathjs
- https://github.com/streamich/memfs
- https://github.com/mobxjs/mobx-react
- https://github.com/mobxjs/mobx
- https://github.com/BenjaminVanRyseghem/numbro
- https://github.com/proj4js/proj4js
- https://github.com/react-csv/react-csv
- https://github.com/facebook/react
- https://github.com/supremetechnopriest/react-idle-timer
- https://github.com/goldenyz/react-perfect-scrollbar
- https://github.com/ReactTraining/react-router
- https://github.com/ReactTraining/react-router
- https://github.com/facebook/create-react-app
- https://github.com/facebook/react
- https://github.com/styled-components/styled-components
- https://github.com/mrdoob/three.js
- https://github.com/Microsoft/TypeScript
- https://github.com/jashkenas/underscore

